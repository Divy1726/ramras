const header = document.getElementById("header"); window.addEventListener("scroll", (() => { 50 < window.scrollY ? header.classList.add("scrolled") : header.classList.remove("scrolled") })); const observerOptions = { threshold: .1, rootMargin: "0px 0px -50px 0px" }, observer = new IntersectionObserver((e => { e.forEach((e => { e.isIntersecting && (e.target.classList.add("visible"), e.target.style.opacity = "1", e.target.style.transform = "translateY(0)") })) }), observerOptions), headings = document.querySelectorAll("h2"), cards = document.querySelectorAll(".product-card, .feature-card, .story-text, .image-frame, .testimonial-card");[...headings, ...cards].forEach((e => { e.style.opacity = "0", e.style.transform = "translateY(30px)", e.style.transition = "opacity 0.8s ease-out, transform 0.8s ease-out", observer.observe(e) })); const mobileToggle = document.getElementById("mobile-toggle"), navLinks = document.querySelector(".nav-links"), navLinksItems = document.querySelectorAll(".nav-links a"); mobileToggle && (mobileToggle.addEventListener("click", (() => { navLinks.classList.toggle("active"), mobileToggle.classList.toggle("active") })), navLinksItems.forEach((e => { e.addEventListener("click", (() => { navLinks.classList.remove("active"), mobileToggle.classList.remove("active") })) }))); let cartCount = 0, cartItems = []; const cartCountElement = document.getElementById("cart-count"), addToCartBtns = document.querySelectorAll(".add-to-cart-btn"), cartBtn = document.getElementById("cart-btn"), cartOverlay = document.getElementById("cart-overlay"), cartDrawer = document.getElementById("cart-drawer"), closeCartBtn = document.getElementById("close-cart"), cartItemsContainer = document.getElementById("cart-items"), cartTotalPriceEl = document.getElementById("cart-total-price"); function updateCartDisplay() { cartCountElement && (cartCountElement.textContent = cartCount) } function saveCart() { localStorage.setItem("ramras_cart", JSON.stringify({ count: cartCount, items: cartItems })) } function openCart() { cartOverlay && cartDrawer && (cartOverlay.classList.add("open"), cartDrawer.classList.add("open"), renderCartItems()) } function closeCart() { cartOverlay && cartDrawer && (cartOverlay.classList.remove("open"), cartDrawer.classList.remove("open")) } function renderCartItems() { if (!cartItemsContainer) return; if (0 === cartItems.length) return cartItemsContainer.innerHTML = '<p class="cart-empty-msg">Your cart is empty.</p>', void (cartTotalPriceEl && (cartTotalPriceEl.textContent = "Rs 0")); let e = "", t = 0; cartItems.forEach((r => { const a = r.price * r.qty; t += a; const n = r.img || "p1.jpeg"; e += `<div class="cart-item"><img src="${n}" alt="${r.name}"><div class="cart-item-details"><h4>${r.name}</h4><p>Qty: ${r.qty}</p><p class="cart-item-price">Rs ${a}</p></div></div>` })), cartItemsContainer.innerHTML = e, cartTotalPriceEl && (cartTotalPriceEl.textContent = "Rs " + t) } if (localStorage.getItem("ramras_cart")) { const e = JSON.parse(localStorage.getItem("ramras_cart")); cartCount = e.count, cartItems = e.items || [], updateCartDisplay() } cartBtn && cartBtn.addEventListener("click", (e => { e.preventDefault(), openCart() })), closeCartBtn && closeCartBtn.addEventListener("click", closeCart), cartOverlay && cartOverlay.addEventListener("click", closeCart), addToCartBtns.forEach((e => { e.addEventListener("click", (e => { e.preventDefault(); let t = "Pink Salt", r = 199, a = 1, n = "c (1).png"; const c = document.querySelector(".product-title"), o = document.getElementById("qty-input"); if (c && o) { t = c.textContent; const e = document.querySelector(".product-price").textContent; r = parseInt(e.replace(/[^0-9]/g, "")), a = parseInt(o.value); const l = document.querySelector(".main-image img"); l && (n = l.getAttribute("src")) } else { const c = e.closest(".product-card"); if (c) { t = c.querySelector("h3").textContent; const e = c.querySelector(".price").textContent; r = parseInt(e.replace(/[^0-9]/g, "")); const o = c.querySelector(".product-image img"); o && (n = o.getAttribute("src")) } } const l = cartItems.find((e => e.name === t)); l ? l.qty += a : cartItems.push({ name: t, price: r, qty: a, img: n }), cartCount += a, saveCart(), updateCartDisplay(), openCart() })) })); const mainImageContainer = document.querySelector(".main-image"), mainImageInfo = document.querySelector(".main-image img"); mainImageContainer && mainImageInfo && (mainImageContainer.addEventListener("mousemove", (function (e) { const t = mainImageContainer.getBoundingClientRect(), r = e.clientX - t.left, a = e.clientY - t.top, n = r / t.width * 100, c = a / t.height * 100; mainImageInfo.style.transformOrigin = `${n}% ${c}%`, mainImageContainer.classList.add("active-zoom") })), mainImageContainer.addEventListener("mouseleave", (function () { mainImageInfo.style.transformOrigin = "center center", mainImageContainer.classList.remove("active-zoom") }))); const inquiryForm = document.querySelector(".inquiry-form"); inquiryForm && inquiryForm.addEventListener("submit", (function (e) { const t = document.getElementById("name"), r = document.getElementById("email"), a = document.getElementById("phone"), n = document.getElementById("message"); let c = !0, o = "Please fill valid details."; const l = /^[A-Za-z\s]+$/; t.value.trim() && l.test(t.value.trim()) || (c = !1); a.value.replace(/[^0-9]/g, "").length < 10 && (c = !1); (r.value.includes("@") && r.value.includes(".")) || (c = !1); n.value.trim() || (c = !1); if (!c) { e.preventDefault(); const i = document.getElementById("status-modal-overlay"), s = document.getElementById("status-title"), d = document.getElementById("status-message"), m = document.getElementById("status-icon"); i && s && d && m && (i.classList.add("active"), s.textContent = "Invalid Input", d.textContent = o, m.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>', m.className = "status-icon error") } })); window.addEventListener("DOMContentLoaded", (() => { const e = new URLSearchParams(window.location.search), t = e.get("status"); if ("success" === t || "error" === t) { const r = document.getElementById("status-modal-overlay"), a = document.getElementById("status-title"), n = document.getElementById("status-message"), c = document.getElementById("status-icon"), o = document.querySelector(".modal-close"); r && a && n && c && (r.classList.add("active"), "success" === t ? (a.textContent = "Thank You!", n.textContent = "Your inquiry has been sent successfully. We will get back to you soon.", c.className = "status-icon success", c.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>') : (a.textContent = "Submission Failed", n.textContent = "There was a problem sending your inquiry. Please try again.", c.className = "status-icon error", c.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>'), o && o.addEventListener("click", (() => { r.classList.remove("active"), window.history.replaceState({}, document.title, window.location.pathname) })), r.addEventListener("click", (e => { e.target === r && (r.classList.remove("active"), window.history.replaceState({}, document.title, window.location.pathname)) }))) } }));
